# Таблица программных компонентов встроенного ПО монитора гребного тренажёра

| № | Компонент | Назначение и краткие требования | Исполнитель |
|---|-----------|---------------------------------|-------------|
| 1 | Core Logic / Race Engine | Состояние тренировки, управление режимами (Just Row, Distance, Time, Calories, Intervals, Race). Поддержка паузы/рестарта, частота обновления логики ≥ 20 Гц. | Рустем |
| 2 | Dynamic Model | Расчёт дистанции, скорости, темпа, мощности на основе оптического сенсора и модели лодки/спортсмена. | Вадим |
| 3 | Force Model | Расчёт силы гребка, хранение live/average кривых, вычисление Drag Factor. Калибровка оптического и force-датчиков, сохранение коэффициентов.| Вадим |
| 4 | Optical Sensor Driver | Захват частоты вращения барабана с оптического датчика (SPI/I²C), фильтрация, ≥ 1 кГц. | ИНТЕМС ЛАБ |
| 5 | Battery Monitor | Измерение напряжения/тока, SoC, предупреждение Low Battery. | ИНТЕМС ЛАБ |
| 6 | Power Management | Режимы сна ESP32 и дисплея, авто-переключение источников питания. | ИНТЕМС ЛАБ |
| 7 | Display UI | Экранные страницы DWIN (DGUS), графики силы, мультиязычность. Обновление ≤ 100 мс. | ИНТЕМС ЛАБ/Рустем |
| 8 | Language Manager | Хранение строк RU/EN, горячее переключение языка. | ИНТЕМС ЛАБ |
| 9 | Storage Manager | SPIFFS/LittleFS. Хранение настроек, 50 последних тренировок, логов. | ИНТЕМС ЛАБ |
|10 | Wi-Fi Service | STA/AP, mDNS, HTTP REST/WebSocket API, TLS (опц.). | ИНТЕМС ЛАБ |
|11 | WebServer | Веб-GUI: настройка, графики, загрузка прошивок. | ИНТЕМС ЛАБ/Рустем |
|12 | BLE Service | Периферия FTMS/HR, OTA-DFU, уведомления 20 Гц. | ИНТЕМС ЛАБ |
|13 | ANT+ Service | Трансляция данных мощности/скорости/HR (FE-C/HRM). | ИНТЕМС ЛАБ |
|14 | Heart Rate Manager | Подключение BLE/ANT+ пульсометров, зоны HR, запись в историю. | ИНТЕМС ЛАБ |
|15 | CSAFE Protocol | Совместимость PM5_CSAFE (BLE, RS-485, TCP), маппинг команд. | ИНТЕМС ЛАБ |
|16 | Mobile App Bridge | Автообнаружение и синхронизация с мобильным ErgRace. | ИНТЕМС ЛАБ |
|17 | OTA Update | Обновление прошивки и ресурсов по Wi-Fi (HTTPS) и BLE DFU. | ИНТЕМС ЛАБ |
|18 | Logging & Diagnostics | Системный журнал, dump через UART/USB и Wi-Fi. | ИНТЕМС ЛАБ |
|19 | RS-485 Driver | Управление трансивером RS-485 (UART half-duplex), линия DE/RE, скорость до 115 200 бод, поддержка мультидроп. Используется протоколом CSAFE и отладкой. | ИНТЕМС ЛАБ |
